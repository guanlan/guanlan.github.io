// Fix for code block overflow in LoveIt theme
// This file specifically addresses the horizontal overflow issue

// Target all code blocks with maximum specificity
.wrapper main .page .single .content {
  // Main highlight container
  .highlight {
    position: relative !important;
    overflow: visible !important;
    margin: .5rem 0 !important;
    
    // The chroma wrapper
    > .chroma {
      position: relative !important;
      overflow: visible !important;
      
      // Table wrapper that contains the code
      .table-wrapper {
        overflow-x: auto !important;
        overflow-y: hidden !important;
        max-width: 100% !important;
        width: 100% !important;
        
        // Custom scrollbar for better visibility
        &::-webkit-scrollbar {
          height: 10px !important;
          background-color: #1e1e1e !important;
        }
        
        &::-webkit-scrollbar-thumb {
          background-color: #555 !important;
          border-radius: 5px !important;
          
          &:hover {
            background-color: #777 !important;
          }
        }
        
        // The table itself
        > table {
          display: table !important;
          width: auto !important;
          min-width: 100% !important;
          border-collapse: collapse !important;
          
          // Table cells
          td {
            vertical-align: top !important;
            
            // Line numbers column
            &:first-child {
              width: auto !important;
              min-width: 2rem !important;
              position: sticky !important;
              left: 0 !important;
              background: #272822 !important;
              z-index: 1 !important;
            }
            
            // Code content column
            &:last-child {
              width: 100% !important;
              padding: 0 !important;
              
              pre {
                margin: 0 !important;
                padding: .5rem !important;
                overflow-x: auto !important;
                overflow-y: hidden !important;
                white-space: pre !important;
                word-wrap: normal !important;
                word-break: normal !important;
                
                code {
                  display: block !important;
                  white-space: pre !important;
                  word-wrap: normal !important;
                  word-break: normal !important;
                  overflow-x: visible !important;
                }
              }
            }
          }
        }
      }
      
      // For code blocks without line numbers
      pre {
        overflow-x: auto !important;
        max-width: 100% !important;
        
        code {
          white-space: pre !important;
          word-wrap: normal !important;
          word-break: normal !important;
        }
      }
    }
  }
}

// Dark theme adjustments
[theme=dark] .wrapper main .page .single .content {
  .highlight > .chroma .table-wrapper {
    &::-webkit-scrollbar {
      background-color: #1a1a1a !important;
    }
    
    > table td:first-child {
      background: #272822 !important;
    }
  }
}

// Mobile responsive adjustments
@media (max-width: 768px) {
  .wrapper main .page .single .content {
    .highlight {
      margin-left: -1rem !important;
      margin-right: -1rem !important;
      
      > .chroma {
        .table-wrapper {
          border-radius: 0 !important;
          
          > table td:first-child {
            // On mobile, line numbers can be hidden for better space
            display: none !important;
          }
        }
      }
    }
  }
}

// Additional fix for inline code to prevent wrapping
.single .content code:not(pre code) {
  white-space: nowrap !important;
  overflow-x: auto !important;
  display: inline-block !important;
  max-width: 100% !important;
}
