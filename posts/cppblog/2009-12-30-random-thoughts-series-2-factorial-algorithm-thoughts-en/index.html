<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Random Thoughts Series 2 - Factorial Algorithm Thoughts - Guanlan Dai</title><meta name="Description" content="This is my cool site"><meta property="og:url" content="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/">
  <meta property="og:site_name" content="Guanlan Dai">
  <meta property="og:title" content="Random Thoughts Series 2 - Factorial Algorithm Thoughts">
  <meta property="og:description" content="by guanlan Factorial again, this is an old topic, right? Without even thinking, a simple recursion will do!
int factorial(int n)
{
if( n == 1)
return 1;
return n * factorial(n-1);
}">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2009-12-30T00:00:00+08:00">
    <meta property="article:modified_time" content="2009-12-30T00:00:00+08:00">
    <meta property="article:tag" content="Original">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Random Thoughts Series 2 - Factorial Algorithm Thoughts">
  <meta name="twitter:description" content="by guanlan Factorial again, this is an old topic, right? Without even thinking, a simple recursion will do!
int factorial(int n)
{
if( n == 1)
return 1;
return n * factorial(n-1);
}">
      <meta name="twitter:site" content="@guanlandai">
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" /><link rel="prev" href="https://rmmod.com/posts/cppblog/2009-12-24-cc-array-peculiar-phenomenon-en/" /><link rel="next" href="https://rmmod.com/posts/cppblog/2010-01-23-memcached-source-code-analysis-notes-pdf-en/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Random Thoughts Series 2 - Factorial Algorithm Thoughts",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/rmmod.com\/posts\/cppblog\/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en\/"
        },"genre": "posts","keywords": "Original","wordcount":  786 ,
        "url": "https:\/\/rmmod.com\/posts\/cppblog\/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en\/","datePublished": "2009-12-30T00:00:00+08:00","dateModified": "2009-12-30T00:00:00+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "guanlan"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Guanlan Dai">Guanlan Dai</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Home </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Guanlan Dai">Guanlan Dai</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Home</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Random Thoughts Series 2 - Factorial Algorithm Thoughts</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>guanlan</a>
</span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2009-12-30">2009-12-30</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;786 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p>by <a href="http://www.cppblog.com/xguru/archive/2009/12/29/104344.html" target="_blank" rel="noopener noreffer">guanlan</a>
<a href="http://topic.csdn.net/t/20030916/20/2267097.html" target="_blank" rel="noopener noreffer"></a>
</p>
<p>Factorial again, this is an old topic, right? Without even thinking, a simple recursion will do!</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />int factorial(int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> if( n == 1)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return 1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return n * factorial(n-1);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>Or you think recursion isn&rsquo;t as efficient as <a href="http://en.wikipedia.org/wiki/Tail_recursion" target="_blank" rel="noopener noreffer">tail recursion</a>
, so with a stroke of your pen:</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />long fact_iter(long product, long counter, long maxcount)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return (counter &gt; maxcount) ? product : fact_iter(product*counter, counter+1, maxcount);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" /><br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />long factorial(long n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return fact_iter(1, 1, n);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>Or maybe you&rsquo;ve read in &ldquo;Code Complete&rdquo;: &ldquo;If a programmer working for me used recursion to calculate factorial, I&rsquo;d rather replace them.&rdquo;<br>
Using recursion to calculate factorial is slow, unpredictable in terms of memory usage during runtime, and difficult to understand. So you change the recursion to a loop statement.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />int factorial(int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int result = 1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> for(int i = 2 ; i &lt;= n; i++)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> result = result * i;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return result;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>When you write this code, don&rsquo;t you feel something is missing?</p>
<p>Testing on my 32-bit environment, it overflows when calculating 33!, so you say, well that&rsquo;s because int is too small, so you switch to long double. Test it again - what is this? It still doesn&rsquo;t work when the numbers get a bit larger.</p>
<p>Then let&rsquo;s use linked lists or arrays instead. Linked lists are too slow, so let&rsquo;s use arrays.<a href="http://topic.csdn.net/t/20030916/20/2267097.html" target="_blank" rel="noopener noreffer"></a>
</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />int factorial2(int n,int a[])<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int carry;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int digit = 1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> a[0] = 1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int temp;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> for(int i = 2; i &lt;= n; ++i)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> for(int j = 1, carry = 0; j &lt;= digit; ++j)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> temp = a[j-1] * i + carry;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> a[j-1] = temp % 10;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> carry = temp / 10;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> while(carry)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> a[++digit-1] = carry % 10;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> carry /= 10;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return &ndash;digit;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>This algorithm simulates the manual calculation process, saves the result in array a, and returns the number of digits in the result.</p>
<p>Are you feeling light-headed at this point? Please hold on for a moment.</p>
<p>What if I need a scientific notation expression for a large number above 100,000? Or ask you, what is the third digit from the left of N! at the 100,000 level? Uh, isn&rsquo;t this a mathematician&rsquo;s job? Cheer up and challenge yourself! What real programmers need is this spirit of getting to the bottom of things.<br>
Let&rsquo;s try mathematical analysis methods. James Stirling, a Scottish mathematician, gave this limit formula more than 280 years ago:</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/1.JPG"
        data-srcset="/img/1.JPG, /img/1.JPG 1.5x, /img/1.JPG 2x"
        data-sizes="auto"
        alt="/img/1.JPG"
        title="/img/1.JPG" /></p>
<p>This formula can calculate the approximate value of n! at extremely fast speed, and can also be used to infinitely approach the exact result. Detailed introduction and proof process is <a href="http://mathworld.wolfram.com/StirlingsApproximation.html" target="_blank" rel="noopener noreffer">here</a>
 or <a href="http://zh.straightworldbank.com/wiki/%E6%96%AF%E7%89%B9%E6%9E%97%E5%85%AC%E5%BC%8F" target="_blank" rel="noopener noreffer">here</a>
.</p>
<p><strong>Stirling Series Formula</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/2.png"
        data-srcset="/img/2.png, /img/2.png 1.5x, /img/2.png 2x"
        data-sizes="auto"
        alt="/img/2.png"
        title="/img/2.png" /></p>
<p>The following code calculates the scientific notation representation of large number N!</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />struct bigNum<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> double n; //mantissa<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int e; //exponent<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />};<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />void factorial3(struct bigNum <em>p,int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> double logx,s,item;//s: sum of series, item: each term of series<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int i;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> logx = n</em> log10((double)n/E);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> p-&gt;e = (int)(logx); p-&gt;n= pow(10.0, logx-p-&gt;e);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> p-&gt;n <em>= sqrt( 2</em> PI* (double)n);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> for (item=1.0,s=0.0,i=0;i&lt;sizeof(a1)/sizeof(double);i++)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> s += item * a1[i];<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> item /= (double)n;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> p-&gt;n *=s;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>The following is the asymptotic expansion of the logarithm of factorial<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/3.png"
        data-srcset="/img/3.png, /img/3.png 1.5x, /img/3.png 2x"
        data-sizes="auto"
        alt="/img/3.png"
        title="/img/3.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />void factorial3b(struct bigNum <em>p,int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> double logR;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> double s,item;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> int i;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> logR=0.5</em>log(2.0*PI)+((double)n+0.5)<em>log(n)-(double)n;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /><br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> for (item=1/(double)n,s=0.0,i=0;i&lt;sizeof(a2)/sizeof(double);i++)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockStart.gif"
        data-srcset="/img/ExpandedSubBlockStart.gif, /img/ExpandedSubBlockStart.gif 1.5x, /img/ExpandedSubBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockStart.gif"
        title="/img/ExpandedSubBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedSubBlock.gif"
        data-srcset="/img/ContractedSubBlock.gif, /img/ContractedSubBlock.gif 1.5x, /img/ContractedSubBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedSubBlock.gif"
        title="/img/ContractedSubBlock.gif" /> <img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> s+= item * a2[i];<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> item /= (double)(n)</em> (double)n;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedSubBlockEnd.gif"
        data-srcset="/img/ExpandedSubBlockEnd.gif, /img/ExpandedSubBlockEnd.gif 1.5x, /img/ExpandedSubBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedSubBlockEnd.gif"
        title="/img/ExpandedSubBlockEnd.gif" /> }<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> logR+=s;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> p-&gt;e = (int)( logR / log(10));//change of base formula<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> p-&gt;n = pow(10.00, logR/log(10) - p-&gt;e);<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>Calculating the number of digits in a factorial is also particularly simple:</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />double getFactorialLength(int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return (n * log(double(n)) - n + 0.5 * log(2.0 * n * PI )) / log(10.0)+1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>This calculates an approximate number of digits, or you can improve it by using the ceil function to find the smallest integer not less than the given real number.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/None.gif"
        data-srcset="/img/None.gif, /img/None.gif 1.5x, /img/None.gif 2x"
        data-sizes="auto"
        alt="/img/None.gif"
        title="/img/None.gif" />int getFactorialLength(int n)<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockStart.gif"
        data-srcset="/img/ExpandedBlockStart.gif, /img/ExpandedBlockStart.gif 1.5x, /img/ExpandedBlockStart.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockStart.gif"
        title="/img/ExpandedBlockStart.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ContractedBlock.gif"
        data-srcset="/img/ContractedBlock.gif, /img/ContractedBlock.gif 1.5x, /img/ContractedBlock.gif 2x"
        data-sizes="auto"
        alt="/img/ContractedBlock.gif"
        title="/img/ContractedBlock.gif" /><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/dot.gif"
        data-srcset="/img/dot.gif, /img/dot.gif 1.5x, /img/dot.gif 2x"
        data-sizes="auto"
        alt="/img/dot.gif"
        title="/img/dot.gif" />{<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> if( n == 1 )<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return 1;<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> else<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/InBlock.gif"
        data-srcset="/img/InBlock.gif, /img/InBlock.gif 1.5x, /img/InBlock.gif 2x"
        data-sizes="auto"
        alt="/img/InBlock.gif"
        title="/img/InBlock.gif" /> return (int)ceil((N<em>log(N)-N+log(2</em>N*PI)/2)/log(10));<br>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/ExpandedBlockEnd.gif"
        data-srcset="/img/ExpandedBlockEnd.gif, /img/ExpandedBlockEnd.gif 1.5x, /img/ExpandedBlockEnd.gif 2x"
        data-sizes="auto"
        alt="/img/ExpandedBlockEnd.gif"
        title="/img/ExpandedBlockEnd.gif" />}</p>
<p>At this point, you can&rsquo;t help but exclaim: the <strong>most brilliant, most essential, most fundamental</strong> thing in computer science is still <strong>mathematics</strong>!</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/800px-Mandelpart2.jpg"
        data-srcset="/img/800px-Mandelpart2.jpg, /img/800px-Mandelpart2.jpg 1.5x, /img/800px-Mandelpart2.jpg 2x"
        data-sizes="auto"
        alt="/img/800px-Mandelpart2.jpg"
        title="/img/800px-Mandelpart2.jpg" /><br>
<a href="http://en.wikipedia.org/wiki/Mandelbrot_set" target="_blank" rel="noopener noreffer">Mandelbrot set</a>
 boundary<br>
Finally, let me end this essay with Russell&rsquo;s words:<br>
Mathematics, rightly viewed, possesses not only truth, but supreme beauty — a beauty cold and austere, like that of sculpture, without appeal to any part of our weaker nature, without the gorgeous trappings of painting or music, yet sublimely pure, and capable of a stern perfection such as only the greatest art can show. The true spirit of delight, the exaltation, the sense of being more than Man, which is the touchstone of the highest excellence, is to be found in mathematics as surely as poetry.</p>
<p>References<br>
1.<a href="http://www.verycd.com/topics/2786508/" target="_blank" rel="noopener noreffer">Tom M. Apostol. &ldquo;Mathematical Analysis&rdquo;<br>
</a>
2<a href="http://www.verycd.com/topics/147539/" target="_blank" rel="noopener noreffer">.Steve McConnell. &ldquo;CODE COMPLETE, Second Edition&rdquo;<br>
</a>
3.<a href="http://en.wikipedia.org/wiki/Stirling_approximation#History" target="_blank" rel="noopener noreffer">http://en.wikipedia.org/wiki/Stirling_approximation#History</a>
<br>
4.<a href="http://mathworld.wolfram.com/StirlingsApproximation.html" target="_blank" rel="noopener noreffer">http://mathworld.wolfram.com/StirlingsApproximation.html</a>
<br>
5.<a href="http://zh.straightworldbank.com/wiki/%E6%96%AF%E7%89%B9%E6%9E%97%E5%85%AC%E5%BC%8F" target="_blank" rel="noopener noreffer">http://zh.straightworldbank.com/wiki/%E6%96%AF%E7%89%B9%E6%9E%97%E5%85%AC%E5%BC%8F</a>
</p>
<hr>
<p><em>Original Chinese version: <a href="http://www.cppblog.com/xguru/archive/2009/12/30/104344.html" target="_blank" rel="noopener noreffer">http://www.cppblog.com/xguru/archive/2009/12/30/104344.html</a>
</em></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2009-12-30</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" data-title="Random Thoughts Series 2 - Factorial Algorithm Thoughts" data-via="guanlandai" data-hashtags="Original"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" data-hashtag="Original"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" data-title="Random Thoughts Series 2 - Factorial Algorithm Thoughts"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" data-title="Random Thoughts Series 2 - Factorial Algorithm Thoughts"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@6.20.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://rmmod.com/posts/cppblog/2009-12-30-random-thoughts-series-2-factorial-algorithm-thoughts-en/" data-title="Random Thoughts Series 2 - Factorial Algorithm Thoughts"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/original/">Original</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/cppblog/2009-12-24-cc-array-peculiar-phenomenon-en/" class="prev" rel="prev" title="A &#39;Strange Phenomenon&#39; in C/C&#43;&#43; Arrays"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>A &#39;Strange Phenomenon&#39; in C/C&#43;&#43; Arrays</a>
            <a href="/posts/cppblog/2010-01-23-memcached-source-code-analysis-notes-pdf-en/" class="next" rel="next" title="Memcached Source Code Analysis Notes PDF">Memcached Source Code Analysis Notes PDF<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Guanlan Dai | CC BY-NC 4.0</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2009 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/css/_code-highlight.scss"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
